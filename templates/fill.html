<!doctype html>

{% extends "layout.html" %}
{% block content %}

<body>
    <h1>Sequence Alignment</h1>

    <form action="table_init" method="POST" enctype="multipart/form-data">
        <p>Sequence 1: <input type="text" name="seq1" value={{seq1}}></p> 
        <p>Sequence 2: <input type="text" name="seq2" value={{seq2}}></p>
        <p><input type="submit" name="submit" value="Create Table"></p>
    </form>

    <form action="table_fill" method="POST" enctype="multipart/form-data">
        <input type="hidden" name="seq1" value={{seq1}}> 
        <input type="hidden" name="seq2" value={{seq2}}>
        <p>Algorithm: 
            <select class="form-select" name="algo" data-width="fit">
              <option value="nw" {% if algo == 'nw' %} selected {% endif %}>Needleman-Wunsch (Global)</option>
              <option value="sw" {% if algo == 'sw' %} selected {% endif %}>Smith-Waterman (Local)</option>
            </select>
        </p>

        <p>Scoring Matrix: 
            <select class="form-select" name="matrix" data-width="fit">
            <option value="blosum62" {% if matrix == 'blosum62' %} selected {% endif %}>blosum62</option>
            <option value="pam250" {% if matrix == 'pam250' %} selected {% endif %}>pam250</option>
            <option value="simple" {% if matrix == 'simple' %} selected {% endif %}>simple</option>
            </select>
        </p>
        <p>Gap Penalty: <input type="number" name="gap" value={{gap}}></p>
        <p><input type="submit" name="submit" value="Align"></p>
    </form>

    <table>
        <tr>
          <td class="no_border"></td>
          <td class="no_border"></td>
          {% for base in seq1 %}
            <th> {{ base }} </th>
          {% endfor %}
          </tr>
        <tr>
          <td class="no_border"></td>
          <td> {{f[0][0]}} </td>
          {% for base in seq1 %}
            <td> {{ f[0][loop.index] }} </td>
          {% endfor %}
        </tr>
        {% for base in seq2 %}
        <tr>
          <th>{{base}}</th>
          <td> {{f[loop.index][0]}} </td>
          {% set i = loop.index %}
          {% for base in seq1 %}
            <td> {{f[i][loop.index]}} </td>
          {% endfor %}
        </tr>
        {% endfor %}
    </table>
</body>

{% endblock %}